<p>è®¾è®¡ä¸€ä¸ª <code>EventEmitter</code> ç±»ã€‚è¿™ä¸ªæ¥å£ä¸ Node.js æˆ– DOM çš„ Event Target æ¥å£ç›¸ä¼¼ï¼Œä½†æœ‰ä¸€äº›å·®å¼‚ã€‚<code>EventEmitter</code> åº”è¯¥å…è®¸è®¢é˜…äº‹ä»¶å’Œè§¦å‘äº‹ä»¶ã€‚</p>

<p>ä½ çš„ <code>EventEmitter</code> ç±»åº”è¯¥æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p>

<ul> 
 <li><strong>subscribe</strong> - è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªä½œä¸ºå­—ç¬¦ä¸²çš„äº‹ä»¶åå’Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°å°†è¢«è°ƒç”¨ã€‚ ä¸€ä¸ªäº‹ä»¶åº”è¯¥èƒ½å¤Ÿæœ‰å¤šä¸ªç›‘å¬å™¨ã€‚å½“è§¦å‘å¸¦æœ‰å¤šä¸ªå›è°ƒå‡½æ•°çš„äº‹ä»¶æ—¶ï¼Œåº”æŒ‰ç…§è®¢é˜…çš„é¡ºåºä¾æ¬¡è°ƒç”¨æ¯ä¸ªå›è°ƒå‡½æ•°ã€‚åº”è¿”å›ä¸€ä¸ªç»“æœæ•°ç»„ã€‚ä½ å¯ä»¥å‡è®¾ä¼ é€’ç»™ <code>subscribe</code> çš„å›è°ƒå‡½æ•°éƒ½ä¸æ˜¯å¼•ç”¨ç›¸åŒçš„ã€‚ <code>subscribe</code> æ–¹æ³•è¿˜åº”è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª <code>unsubscribe</code> æ–¹æ³•ï¼Œä½¿ç”¨æˆ·å¯ä»¥å–æ¶ˆè®¢é˜…ã€‚å½“è°ƒç”¨ <code>unsubscribe</code> æ–¹æ³•æ—¶ï¼Œå›è°ƒå‡½æ•°åº”è¯¥ä»è®¢é˜…åˆ—è¡¨ä¸­åˆ é™¤ï¼Œå¹¶è¿”å› undefinedã€‚</li> 
 <li><strong>emit</strong> - è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šä¸€ä¸ªä½œä¸ºå­—ç¬¦ä¸²çš„äº‹ä»¶åå’Œä¸€ä¸ªå¯é€‰çš„å‚æ•°æ•°ç»„ï¼Œè¿™äº›å‚æ•°å°†ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚å¦‚æœæ²¡æœ‰è®¢é˜…ç»™å®šäº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚å¦åˆ™ï¼ŒæŒ‰ç…§å®ƒä»¬è¢«è®¢é˜…çš„é¡ºåºè¿”å›æ‰€æœ‰å›è°ƒå‡½æ•°è°ƒç”¨çš„ç»“æœæ•°ç»„ã€‚</li> 
</ul>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š
</b>actions = ["EventEmitter", "emit", "subscribe", "subscribe", "emit"], 
values = [[], ["firstEvent", "function cb1() { return 5; }"],  ["firstEvent", "function cb1() { return 5; }"], ["firstEvent"]]
<b>è¾“å‡ºï¼š</b>[[],["emitted",[]],["subscribed"],["subscribed"],["emitted",[5,6]]]
<b>è§£é‡Šï¼š</b>
const emitter = new EventEmitter();
emitter.emit("firstEvent"); // [], è¿˜æ²¡æœ‰è®¢é˜…ä»»ä½•å›è°ƒå‡½æ•°
emitter.subscribe("firstEvent", function cb1() { return 5; });
emitter.subscribe("firstEvent", function cb2() { return 6; });
emitter.emit("firstEvent"); // [5, 6], è¿”å› cb1 å’Œ cb2 çš„è¾“å‡º
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š
</b>actions = ["EventEmitter", "subscribe", "emit", "emit"], 
values = [[], ["firstEvent", "function cb1(...args) { return args.join(','); }"], ["firstEvent", [1,2,3]], ["firstEvent", [3,4,6]]]
<b>è¾“å‡ºï¼š</b>[[],["subscribed"],["emitted",["1,2,3"]],["emitted",["3,4,6"]]]
<strong>è§£é‡Šï¼š</strong>æ³¨æ„ emit æ–¹æ³•åº”è¯¥èƒ½å¤Ÿæ¥å—ä¸€ä¸ªå¯é€‰çš„å‚æ•°æ•°ç»„ã€‚

const emitter = new EventEmitter();
emitter.subscribe("firstEvent, function cb1(...args) { return args.join(','); });
emitter.emit("firstEvent", [1, 2, 3]); // ["1,2,3"]
emitter.emit("firstEvent", [3, 4, 6]); // ["3,4,6"]
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š
</b>actions = ["EventEmitter", "subscribe", "emit", "unsubscribe", "emit"], 
values = [[], ["firstEvent", "(...args) =&gt; args.join(',')"], ["firstEvent", [1,2,3]], [0], ["firstEvent", [4,5,6]]]
<b>è¾“å‡ºï¼š</b>[[],["subscribed"],["emitted",["1,2,3"]],["unsubscribed",0],["emitted",[]]]
<b>è§£é‡Šï¼š</b>
const emitter = new EventEmitter();
const sub = emitter.subscribe("firstEvent", (...args) =&gt; args.join(','));
emitter.emit("firstEvent", [1, 2, 3]); // ["1,2,3"]
sub.unsubscribe(); // undefined
emitter.emit("firstEvent", [4, 5, 6]); // [], æ²¡æœ‰è®¢é˜…è€…
</pre>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>

<pre>
<b>è¾“å…¥ï¼š
</b>actions = ["EventEmitter", "subscribe", "subscribe", "unsubscribe", "emit"], 
values = [[], ["firstEvent", "x =&gt; x + 1"], ["firstEvent", "x =&gt; x + 2"], [0], ["firstEvent", [5]]]
<b>è¾“å‡ºï¼š</b>[[],["subscribed"],["emitted",["1,2,3"]],["unsubscribed",0],["emitted",[7]]]
<b>è§£é‡Šï¼š</b>
const emitter = new EventEmitter();
const sub1 = emitter.subscribe("firstEvent", x =&gt; x + 1);
const sub2 = emitter.subscribe("firstEvent", x =&gt; x + 2);
sub1.unsubscribe(); // undefined
emitter.emit("firstEvent", [5]); // [7]</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li><code>1 &lt;= actions.length &lt;= 10</code></li> 
 <li><code>values.length === actions.length</code></li> 
 <li>æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚ä¾‹å¦‚ï¼Œä½ ä¸éœ€è¦å¤„ç†å–æ¶ˆä¸€ä¸ªä¸å­˜åœ¨çš„è®¢é˜…çš„æƒ…å†µã€‚</li> 
 <li>åªæœ‰ 4 ç§ä¸åŒçš„æ“ä½œï¼š<code>EventEmitter</code>ã€<code>emit</code>ã€<code>subscribe</code> å’Œ <code>unsubscribe</code>&nbsp;ã€‚ <code>EventEmitter</code> æ“ä½œæ²¡æœ‰å‚æ•°ã€‚</li> 
 <li><code>emit</code> æ“ä½œæ¥æ”¶ 1 æˆ– 2 ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è§¦å‘çš„äº‹ä»¶åï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚</li> 
 <li><code>subscribe</code> æ“ä½œæ¥æ”¶ 2 ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯äº‹ä»¶åï¼Œç¬¬äºŒä¸ªæ˜¯å›è°ƒå‡½æ•°ã€‚</li> 
 <li><code>unsubscribe</code> æ“ä½œæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå³ä¹‹å‰è¿›è¡Œè®¢é˜…çš„é¡ºåºï¼ˆä» 0 å¼€å§‹ï¼‰ã€‚</li> 
</ul>

<div><li>ğŸ‘ 6</li><li>ğŸ‘ 0</li></div>